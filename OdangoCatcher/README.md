
## 概要
* うさぎを左右に動かします。
* うさぎの左右に矢印マークがあり、これをタップ（クリック）し続けることでその方向にうさぎを動かすことができます。
* PCの場合は矢印キー、WASDにも対応しています。（上下移動はなし）
* うさぎの真上からおだんごがヒットするとおだんごをキャッチできます。
* 降ってくるおだんごをキャッチし、時間内の得点を競うゲームです。
* スマホ、タブレット、PC操作に対応しています。

## フォルダ構造
OdangoCatcher
 - image (画像素材)
    - rabbit_anim1.png (停止状態のうさぎイラスト, 右向き)
    - rabbit_anim2.png (歩行中のうさぎのイラスト, 右向き)
    - rabbit_anim3.png (歩行中のうさぎのイラスト, 右向き)
    - empty_container.png (空っぽの容器, おだんごが0個の状態)
    - level_1_container.png (おだんごが1〜5個の状態)
    - level_2_container.png (おだんごが6〜10個の状態)
    - level_3_container.png (おだんごが10〜15個の状態)
    - full_container.png (おだんごが15個以上の状態)

 - js (処理をするjsファイル群)

## 要件定義
 - アニメーションについて
     - 中央底面を(0, 0)とします。
     - うさぎはデフォルト状態では右向きです。
     - うさぎを移動させるアクションを起こした際に、その方向を向きます。
     - うさぎは左右しか向かず、上下方向に動くことはないです。
     - うさぎの移動はrabbit_anim2.png, rabbit_anim3.pngを交互に表示させることで表します。
     - うさぎ本体は中央から動かず、背景を動かすことで移動を表現します。
     - うさぎの画像の大きさは128✖️128pxですが、左右32pxの範囲は当たり判定がないものとします。
     - うさぎと容器の画像を任意の地点で左上揃えにした際、容器の位置は右に32px、上に32pxズラして置くとうさぎが容器を持っている状態を表せます。
     - おだんごは画面外上部から降ってきます。発生するx座標はランダムです。

## 画面構成
* `index.html` にスコア・タイマー・スタートボタンを含むHUDと、中央固定のうさぎ／容器、落下レイヤー、左右移動ボタンを定義しました。
* 背景は`background-position`だけを動かして移動感を出し、うさぎ本体は常に中央付近に固定しています。背景が動く際は落下レイヤーも連動して逆方向に流れ、おだんごを含めて移動表現しています。
* CSSで容器画像をうさぎの右に32px/上に32pxずらして配置し、左右反転時は親要素を`scaleX(-1)`させることで自然に持ち替える表現にしています。

## 操作方法
* PC: ←→キーまたはA/Dキーを押し続けると背景がスクロールし、うさぎがその方向を向きます。
* スマホ／タブレット: 画面下の左右ボタンを長押しすることで同じ操作ができます。
* おだんごは上から落下するため、真上から容器中央に入るようタイミングを合わせるとスコアが加算されます。1プレイは60秒です。

## 実装メモ
* `js`フォルダには役割ごとに1関数ずつ定義されたスクリプトを配置し、`defer`属性で順に読み込んで初期化しています。
* うさぎの歩行アニメーションは `rabbit_anim2.png` と `rabbit_anim3.png` を200ms間隔で交互に表示し、停止時は `rabbit_anim1.png` に戻します。
* 容器画像はスコアに応じて empty → level1 → level2 → level3 → full の順に切り替わります。
* おだんごは`div.dango`要素として生成し、毎フレームの落下に背景スクロール分の横移動も加味した上で、容器の上面を通過した瞬間に左右位置を比較してヒット判定を行います。茶色の地面に触れたおだんごは即座に消失します。
* `file://`で直接開いてもCORSエラーにならないようES Modulesは使用しておらず、各関数は`window`に登録される従来型スクリプトです。

## 処理フロー
1. `createLayout.js`：ゲーム画面で使用するDOM要素を収集し、他の関数から参照しやすい形にまとめます。
2. `initGameState.js`：スコア・タイマー・移動量・スポーン間隔などの初期値を保持するステートオブジェクトを作成します。
3. `resetGameState.js`：スタート時にステートと背景・画像・おだんごレイヤーを初期化し、前回の残骸を除去します。
4. `registerKeyboard.js`：キーボードの左右入力（矢印/WASD）を監視し、押下状態から方向値を算出します。
5. `registerTouchButtons.js`：画面内の矢印ボタンにポインタイベントを設定し、長押しで移動方向を更新します。
6. `spawnOdango.js`：ランダムなX座標でおだんごDOMを生成し、落下キューに登録します。
7. `updateBackground.js`：移動方向に応じて背景の`background-position`を加算し、うさぎが動いているように見せます。
8. `updateRabbitAnimation.js`：歩行フレームの切り替えと左右反転クラスの付与でうさぎの見た目を制御します。
9. `updateContainerImage.js`：スコアの段階に応じて容器画像を差し替えます。
10. `updateHud.js`：スコアと残り時間をHUDラベルに反映します。
11. `updateDrops.js`：各おだんごの落下座標を更新し、容器中央との当たり判定を行います。
12. `startGameLogic.js`：スタートボタン、ゲームループ、タイマー減算、スポーン間隔の再計算など全体の進行を統括します。
